////////////////////////////////////////////////////////////////////////////////
/////////////////////////         SISTEMA RIPS         /////////////////////////
/////////////////////////      PIJAOS SALUD EPSI      //////////////////////////
///////////////////                JS PERMISO                ///////////////////
/////////////////////////  DEPARTAMENTO DE DESARROLLO  /////////////////////////
/////////////////////////     AMBITO: PERMISO.PHP      /////////////////////////
////////          METODOS JS PARA EL PROCESAMIENTO DE INFORMACION        ///////
////////////////////////////////////////////////////////////////////////////////

var tabla;function init(){listar(),$("#formulario").on("submit",function(a){guardaryeditar(a)})}function listar(){tabla=$("#tbllistado").dataTable({aProcessing:!0,aServerSide:!0,dom:"Bfrtip",buttons:["copy","excelHtml5"],columnDefs:[{className:"dt-body-center",targets:[0,1,3]},{className:"dt-body-left",targets:[2]}],ajax:{url:"../../controladores/permiso.php?op=listar",type:"post",dataType:"json",error:function(a){console.log(a.responseText)}},bDestroy:!0,iDisplayLength:20}).DataTable()}function activar(a){alertify.confirm('<i class="zmdi zmdi-notifications-active"></i> ¿Desea activar el permiso?').set({title:"Activar permiso"}).set({labels:{ok:"Aceptar",cancel:"Cancelar"}}).set("onok",function(o){$.post("../../controladores/permiso.php?op=activar",{cod_permiso:a},function(a){alertify.alert().setting({title:"Estado de la solicitud",label:"Aceptar",message:'<i class="zmdi zmdi-info"></i> '+a+"."}).show(),tabla.ajax.reload()})})}function desactivar(a){alertify.confirm('<i class="zmdi zmdi-notifications-active"></i> ¿Desea desactivar el permiso?').set({title:"Desactivar permiso"}).set({labels:{ok:"Aceptar",cancel:"Cancelar"}}).set("onok",function(o){$.post("../../controladores/permiso.php?op=desactivar",{cod_permiso:a},function(a){alertify.alert().setting({title:"Estado de la solicitud",label:"Aceptar",message:'<i class="zmdi zmdi-info"></i> '+a+"."}).show(),tabla.ajax.reload()})})}function guardaryeditar(a){a.preventDefault(),$("#btnGuardar").prop("disabled",!0);var o=new FormData($("#formulario")[0]);$.ajax({url:"../../controladores/permiso.php?op=guardaryeditar",type:"POST",data:o,contentType:!1,processData:!1,success:function(a){alertify.alert().setting({title:"Estado de la solicitud",label:"Aceptar",message:'<i class="zmdi zmdi-info"></i> '+a+"."}).show(),mostrarform(!1),tabla.ajax.reload()}}),limpiar()}function mostrar(a){$.post("../../controladores/permiso.php?op=mostrar",{cod_permiso:a},function(a,o){a=JSON.parse(a),mostrarform(!0),$("#cod_permiso").val(a.COD_MENU),$("#nombre").val(a.NOMBRE),$("#descripcion").val(a.DESCRIPCION)})}function mostrarform(a){limpiar(),a?($("#listadoregistros").hide(),$("#formularioregistros").show(),$("#btnGuardar").prop("disabled",!1),$("#btnagregar").hide()):($("#listadoregistros").show(),$("#formularioregistros").hide(),$("#btnagregar").show())}function limpiar(){$("#cod_permiso").val(""),$("#nombre").val(""),$("#descripcion").val("")}function cancelarform(){limpiar(),mostrarform(!1)}init();



////////////////////////////////////////////////////////////////////////////////
/////////////////////////         SISTEMA RIPS         /////////////////////////
/////////////////////////      PIJAOS SALUD EPSI      //////////////////////////
///////////////////         JS BUSCAR_LIQUIDACION CAP        ///////////////////
/////////////////////////  DEPARTAMENTO DE DESARROLLO  /////////////////////////
/////////////////////////  AMBITO: PROCESAMIENTO CAPT  /////////////////////////
////////          METODOS JS PARA EL PROCESAMIENTO DE INFORMACION        ///////
////////////////////////////////////////////////////////////////////////////////



var tabla,tabla_prestadores;function init(){carga_vacia(),carga_vacia_prestador(),cargar_vigencia(),$("#nueva").attr("disabled",!0)}function cargar_vigencia(){for(var a=document.querySelector("#vigencia"),e=(new Date).getFullYear();e>=2020;e--){var t=document.createElement("option");t.innerHTML=e,t.value=e,a.appendChild(t)}}function cargar_meses(){$("#mes").empty();var a=$("#vigencia").val(),e=document.querySelector("#mes");if(""!==a){const i=new Date;let n=["Elige una opción","Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],s=["","01","02","03","04","05","06","07","08","09","10","11","12"];for(var t=parseInt(a)===parseInt(i.getFullYear())?parseInt(i.getMonth()):11,r=0;r<=t+1;r++){(o=document.createElement("option")).innerHTML=n[r],o.value=s[r],e.appendChild(o)}}else{var o;(o=document.createElement("option")).innerHTML="Elige una opción",o.value="",e.appendChild(o)}}function carga_vacia(){tabla=$("#tbllistado").dataTable({dom:"Bfrtip",buttons:["copyHtml5","excelHtml5"]}).DataTable()}function carga_vacia_prestador(){tabla_prestadores=$("#tbllistadoprestador").dataTable({dom:"Bfrtip",buttons:[]}).DataTable()}function listar(){if(1===validar_campos()){$("#filtrar").html("Consultando..."),$("#filtrar").attr("disabled",!0);var a=$("#nit_prestador").val(),e=$("#vigencia").val(),t=$("#mes").val();tabla=$("#tbllistado").dataTable({aProcessing:!0,aServerSide:!0,dom:"Bfrtip",buttons:["copyHtml5","excelHtml5"],columnDefs:[{className:"dt-body-center",targets:[0,1,2,3]},{targets:3,render:$.fn.dataTable.render.number(".",",",2,"$")}],ajax:{url:"../../controladores/prefactura.php?op=buscar_contrato",data:{nit_prestador:a,n_periodo:t+"/"+e},type:"get",dataType:"json",error:function(a){console.log(a.responseText)}},initComplete:function(a,e){e.aaData.length>0?($("#nueva").removeAttr("disabled"),$("#filtrar").html("<i class='zmdi zmdi-search-in-file'></i> &nbsp; Buscar")):($("#filtrar").removeAttr("disabled"),$("#filtrar").html("<i class='zmdi zmdi-search-in-file'></i> &nbsp; Buscar"))},bDestroy:!0,iDisplayLength:10,order:[[1,"desc"]]}).DataTable()}}function validar_campos(){var a=1;return""===$("#nit_prestador").val()?($("#nit_prestador").focus(),a=0):""===$("#vigencia").val()?($("#vigencia").focus(),a=0):""===$("#mes").val()&&($("#mes").focus(),a=0),a}function mostrar_bprestador(a){a?$("#modal_bprestador").addClass("is-active"):($("#tbllistadoprestador").dataTable().fnClearTable(),$("#nomb_prestador").val(""),$("#modal_bprestador").removeClass("is-active"))}function listar_bprestador(){if(""!==$("#nomb_prestador").val().trim()){$("#filtrar_prestador").attr("disabled",!0);var a=$("#nomb_prestador").val();tabla_prestadores=$("#tbllistadoprestador").dataTable({aProcessing:!0,aServerSide:!0,dom:"Bfrtip",buttons:[],columnDefs:[{className:"dt-body-center",targets:[0,1,2,4,5]},{width:"5%",targets:0},{width:"10%",targets:1},{width:"10%",targets:2}],ajax:{url:"../../controladores/rips.php?op=buscar_prestador",data:{nomb_prestador:a},type:"get",dataType:"json",error:function(a){console.log(a.responseText)}},initComplete:function(){$("#filtrar_prestador").removeAttr("disabled")},bDestroy:!0,iDisplayLength:5,order:[[2,"desc"]]}).DataTable()}else $("#nomb_prestador").focus()}function asignar_nit(a){$("#nit_prestador").val(a),mostrar_bprestador(!1)}function limpiar(){$("#tbllistado").dataTable().fnClearTable(),$("#filtrar").removeAttr("disabled"),$("#nueva").attr("disabled",!0)}init();
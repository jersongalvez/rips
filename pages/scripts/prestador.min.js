
////////////////////////////////////////////////////////////////////////////////
/////////////////////////         SISTEMA RIPS         /////////////////////////
/////////////////////////      PIJAOS SALUD EPSI      //////////////////////////
///////////////////              JS PRESTADOR                ///////////////////
/////////////////////////  DEPARTAMENTO DE DESARROLLO  /////////////////////////
/////////////////////////   AMBITO: PRESTADOR.PHP      /////////////////////////
////////          METODOS JS PARA EL PROCESAMIENTO DE INFORMACION        ///////
////////////////////////////////////////////////////////////////////////////////

var tabla,tabla_usuarios;function init(){mostrarform_usuario(!1),listar_prestador(),$.post("../../controladores/prestador.php?op=permisos&id= ",function(a){$("#permisos").html(a)}),$("#cod_usuario").keyup(function(){if(!$(this).is("[readonly]")){var a=$(this).val();$("#password").val(a)}}),$(".cambioC").on("click",function(){$(this).is(":checked")?cambioClave(!0):cambioClave(!1)}),$("#formulario").on("submit",function(a){guardaryeditar(a)})}function listar_prestador(){tabla=$("#tbllistado").dataTable({aProcessing:!0,aServerSide:!0,dom:"Bfrtip",buttons:["copy","excelHtml5"],columnDefs:[{className:"dt-body-center",targets:[0,1,2,4,5,6,7,8]},{className:"dt-body-left",targets:[3]}],ajax:{url:"../../controladores/prestador.php?op=listar_prestador",type:"post",dataType:"json",error:function(a){console.log(a.responseText)}},bDestroy:!0,iDisplayLength:18}).DataTable()}function activar_prestador(a){alertify.confirm('<i class="zmdi zmdi-notifications-active"></i> 多Desea activar el prestador '+a+"?").set({title:"Activar prestador"}).set({labels:{ok:"Aceptar",cancel:"Cancelar"}}).set("onok",function(o){$.post("../../controladores/prestador.php?op=activar_prestador",{nit_prestador:a},function(a){alertify.alert().setting({title:"Estado de la solicitud",label:"Aceptar",message:'<i class="zmdi zmdi-info"></i> '+a+"."}).show(),tabla.ajax.reload()})})}function desactivar_prestador(a){alertify.confirm('<i class="zmdi zmdi-notifications-active"></i> 多Desea desactivar el prestador '+a+"?").set({title:"Desactivar prestador"}).set({labels:{ok:"Aceptar",cancel:"Cancelar"}}).set("onok",function(o){$.post("../../controladores/prestador.php?op=desactivar_prestador",{nit_prestador:a},function(a){alertify.alert().setting({title:"Estado de la solicitud",label:"Aceptar",message:'<i class="zmdi zmdi-info"></i> '+a+"."}).show(),tabla.ajax.reload()})})}function mostrar(a){mostrar_prestador(a),listar_usuarios(a),mostrarform_prestador(!0)}function mostrar_prestador(a){$.post("../../controladores/prestador.php?op=mostrar",{nit_prestador:a},function(a,o){a=JSON.parse(a),$("#nit_prestador").val(a.NIT_PRESTADOR),$("#nom_prestador").val(a.NOM_PRESTADOR)})}function listar_usuarios(a){tabla_usuarios=$("#tblusuarios").dataTable({aProcessing:!0,aServerSide:!0,dom:"Bfrtip",buttons:["copy","excelHtml5"],columnDefs:[{className:"dt-body-center",targets:[0,1,2,3,4,5,6]}],ajax:{url:"../../controladores/prestador.php?op=listar_usuarios",data:{nit_prestador:a},type:"post",dataType:"json",error:function(a){console.log(a.responseText)}},bDestroy:!0,iDisplayLength:5}).DataTable()}function activar_usuario(a){alertify.confirm('<i class="zmdi zmdi-notifications-active"></i> 多Desea activar el usuario '+a+"?").set({title:"Activar usuario"}).set({labels:{ok:"Aceptar",cancel:"Cancelar"}}).set("onok",function(o){$.post("../../controladores/prestador.php?op=activar_usuario",{cod_usuario:a},function(a){alertify.alert().setting({title:"Estado de la solicitud",label:"Aceptar",message:'<i class="zmdi zmdi-info"></i> '+a+"."}).show(),tabla_usuarios.ajax.reload()})})}function desactivar_usuario(a){alertify.confirm('<i class="zmdi zmdi-notifications-active"></i> 多Desea desactivar el usuario '+a+"?").set({title:"Desactivar usuario"}).set({labels:{ok:"Aceptar",cancel:"Cancelar"}}).set("onok",function(o){$.post("../../controladores/prestador.php?op=desactivar_usuario",{cod_usuario:a},function(a){alertify.alert().setting({title:"Estado de la solicitud",label:"Aceptar",message:'<i class="zmdi zmdi-info"></i> '+a+"."}).show(),tabla_usuarios.ajax.reload()})})}function guardaryeditar(a){a.preventDefault(),$("#btnGuardar").prop("disabled",!0);var o=new FormData($("#formulario")[0]);$.ajax({url:"../../controladores/prestador.php?op=guardaryeditar",type:"POST",data:o,contentType:!1,processData:!1,success:function(a){alertify.alert().setting({title:"Estado de la solicitud",label:"Aceptar",message:'<i class="zmdi zmdi-info"></i> '+a+"."}).show(),mostrarform_usuario(!1),tabla_usuarios.ajax.reload()}}),limpiar_usuario()}function mostrar_usuario(a){$.post("../../controladores/prestador.php?op=mostrar_usuario",{cod_usuario:a},function(a,o){a=JSON.parse(a),mostrarform_usuario(!0),$("#ni_prest").val(""),$("#cambiarContrasena").show(),$("#password").attr("disabled","disabled"),$("#cod_usuario").prop("readonly",!0),$("#tipo_documento").val(a.TIP_DOCUMENTO),$("#num_documento").val(a.NUM_DOCUMENTO),$("#cod_usuario").val(a.COD_USUARIO),$("#nom_usuario").val(a.NOM_USUARIO)}),$.post("../../controladores/prestador.php?op=permisos&id="+a,function(a){$("#permisos").html(a)})}function mostrarform_prestador(a){limpiar_prestador(),a?($("#listadoregistros").hide(),$("#formularioregistros").show()):($("#listadoregistros").show(),$("#formularioregistros").hide())}function limpiar_prestador(){$("#nit_prestador").val(""),$("#nom_prestador").val("")}function cancelarform(){limpiar_prestador(),mostrarform_prestador(!1)}function mostrarform_usuario(a){limpiar_usuario(),a?($("#listadousuarios").hide(),$("#btnSalir").hide(),$("#formulario").show(),$("#ni_prest").val($("#nit_prestador").val()),$("#cambiarContrasena").hide(),$("#btnGuardar").prop("disabled",!1),$("#btnagregar").hide()):($("#listadousuarios").show(),$("#btnSalir").show(),$("#formulario").hide(),$("#btnagregar").show())}function cambioClave(a){a?($("#password").removeAttr("disabled"),$("#password").val($("#cod_usuario").val())):($("#password").attr("disabled","disabled"),$("#password").val(""))}function limpiar_usuario(){$("#ni_prest").val(""),$("#tipo_documento option:first").prop("selected",!0),$("#num_documento").val(""),$("#cod_usuario").val(""),$("#nom_usuario").val(""),$("#cod_usuario").prop("readonly",!1),$("#password").val(""),$("#password").removeAttr("disabled"),$("input[type=checkbox]").prop("checked",!1)}function cancelarform_usuario(){limpiar_usuario(),mostrarform_usuario(!1)}init();

